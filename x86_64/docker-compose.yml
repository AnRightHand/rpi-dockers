version: '3'

services:

  portainer:
    container_name: portainer
    image: portainer/portainer
    command: -H unix:///var/run/docker.sock
    restart: always
    ports:
      - "9000:9000"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /docker/data/portainer:/data
  aria2:
    container_name: aria2
    build:
      context: ./
      dockerfile: Dockerfile-aria2
    restart: always
    ports:
      - "6800:6800"
      - "6881-6999:6881-6999"
    volumes:
      - /docker/conf/aria2:/config
      - /docker/data/downloads:/data
      - /docker/data/other/downloads:/downloads

  filebrowser:
    container_name: filebrowser
    image: filebrowser/filebrowser
    restart: always
    ports:
      - "8081:80"
    volumes:
      - /docker/conf/filebrowser/filebrowser.json:/.filebrowser.json
      - /docker/conf/filebrowser/database.db:/database.db
      - /docker/data:/srv

  caddy:
    container_name: caddy
    build:
      context: ./
      dockerfile: Dockerfile-caddy
    restart: always
    ports:
      - "8080:80"
      - "8443:443"
    volumes:
      - /docker/conf/caddy:/config
      - /docker/data:/webroot

  gitea:
    container_name: gitea
    image: gitea/gitea
    restart: always
    ports:
      - "3000:3000"
      - "8822:22"
    volumes:
      - /docker/data/gitea:/data

  syncthing:
    container_name: syncthing
    image: syncthing/syncthing
    restart: always
    ports:
      - "22000:22000"
      - "8384:8384"
      - "21027:21027/udp"
    volumes:
      - /docker/conf/syncthing:/config
      - /docker/data/sync:/sync
      - /docker/data/sync:/data1
      - /docker/data/other/sync:/data2

  baiduPCS:
    container_name: baiduPCS
    build:
      context: ./
      dockerfile: Dockerfile-baiduPCS-Web
    restart: always
    ports:
      - "5299:5299"
    volumes:
      - /docker/data/BDdownloads:/root/Download
      - /docker/data/other/BDdownloads:/root/Downloads

  v2ray:
    container_name: v2ray
    image: v2ray/official
    restart: always
    ports:
      - "1081-1089:1081-1089"
      - "1091-1099:1091-1099/udp"
    volumes:
      - /docker/conf/v2ray/config.json:/etc/v2ray/config.json